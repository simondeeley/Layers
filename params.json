{"name":"Layers","tagline":"A dive into the world of micro frameworks","body":"LAYERS\r\n======\r\n\r\n[![SensioLabsInsight](https://insight.sensiolabs.com/projects/3a360f7f-4cff-41a8-b4ae-10b1bf031be4/small.png)](https://insight.sensiolabs.com/projects/3a360f7f-4cff-41a8-b4ae-10b1bf031be4)\r\n\r\nA dive into the world of micro frameworks\r\n\r\nPlease note this repository is entirely experimental - please feel free to fork and suggest improvements!\r\n\r\n\r\n### Usage\r\nThe idea is to build a simple iterator that takes a set of instructions that have been prioritised to execute in a certain order and then execute those functions at run time.\r\n\r\nHere's a full-working example\r\n```php    \r\nrequire_once __DIR__ . '/../app/bootstrap.php';\r\nrequire_once __DIR__ . '/../app/AppCore.php';\r\n\r\nuse Layers\\Collection\\LayerCollection;\r\n\r\n$app = new AppCore(true);\r\n$app->setShared(new array());\r\n\r\n$collection = new LayerCollection();\r\n\r\n$collection\r\n    ->add(function () use (&$container) {\r\n        $container['response'] = array();\r\n    },110)\r\n    ->add(function () use (&$container) {\r\n        $container['response'][1] = 'Second';  \r\n    },100)\r\n    ->add(function () use (&$container) {\r\n        $container['response'][2] = 'First';  \r\n    },109)\r\n    ->add(function () use (&$container) {\r\n        $container['response'][3] = 'Third';  \r\n    },100)\r\n    ->add(function () use (&$container) {\r\n        var_dump($container);\r\n    })\r\n;\r\n\r\n$app->setLayers($collection);\r\n$app->run();\r\n```\r\nBreaking it down, we have the following happening:\r\n1. First we initialise a new instance of AppCore\r\n1. We then create a simple array for sharing - a dependency injection container using `$app->setShared()` You could use something more sophisticated but an array is the simplest of all and will suffice for the demo.\r\n1. Next we need to build our collection of functions, that's where the `new LayerCollection()` comes in. It has a simple method `add` to push items onto the priority stack.\r\n1. You'll notice that we've used closures to create the callbacks for when the stack is run. The referenced 'container' is then accessible to all functions in the app as it is executed.\r\n1. Finally, we add the collection to the app and hit run!\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}